/*
 * Copyright (c) 2025 The ZMK Contributors
 * Copyright (c) 2025 monksoffunk
 *
 * SPDX-License-Identifier: MIT
 */

/*
 * RP2040 uses the Titan8000 custom kscan driver (inverted scan):
 * - drive selected pin ACTIVE (expected LOW via GPIO_ACTIVE_LOW)
 * - read all other pins as inputs with pull-ups
 */
&kscan0 {
    compatible = "titan8000,kscan-gpio-charlieplex";

    gpios
      = <&xiao_d 0 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
      , <&xiao_d 1 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
      , <&xiao_d 2 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
      , <&xiao_d 3 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
      , <&xiao_d 4 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
      , <&xiao_d 5 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
      , <&xiao_d 6 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
      , <&xiao_d 7 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
      , <&xiao_d 8 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
      , <&xiao_d 9 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>;

    discharge-before-inputs-us = <5>;
};
